<!DOCTYPE html>
<html>
    <head>

        <script>

            // INIT

            function initfooter() {
                document.getElementById('download-issue').setAttribute('href', downloadlocation);
                resetverticalbuttons()
            }
        </script>

        <script>

            // VERTICAL NAVIGATION

            var layoutList = ["coverwrap", "inhaltsverzeichnis", "posthistorische-klassenkaempfe", "der-neue-rahmen", "agieren-und-agitieren", "footnotes"]
            var layoutCurrent = 0

            function resetverticalbuttons() {
                if (layoutCurrent==0) {
                    document.getElementById("to-top").disabled = true;
                    document.getElementById("to-top").style.color = "lightgrey";
                }
                else {
                    document.getElementById("to-top").disabled = false;
                    document.getElementById("to-top").style.color = "white";
                }
                
                if (layoutCurrent==layoutList.length-1) {
                    document.getElementById("to-bottom").disabled = true;
                    document.getElementById("to-bottom").style.color = "lightgrey";
                }
                else {
                    document.getElementById("to-bottom").disabled = false;
                    document.getElementById("to-bottom").style.color = "white";
                }
            }

            function verticalup() {
                if(layoutCurrent > 0) {
                    layoutCurrent = layoutCurrent - 1
                    document.getElementById(layoutList[layoutCurrent]).scrollIntoView()
                    resetverticalbuttons()
                }
            }

            function verticaldown() {
                if(layoutCurrent < layoutList.length - 1) {
                    document.getElementById(layoutList[layoutCurrent]).scrollIntoView()
                    layoutCurrent = layoutCurrent + 1
                    resetverticalbuttons()
                }
            }
            

            document.getElementById("content").addEventListener("scroll", function() {
                
                var scrollheight = document.getElementById("content").scrollTop
                console.log("SCROLLING")
                for (let i = 0; i < layoutList.length; i++) {

                    if(scrollheight>=document.getElementById(layoutList[i]).offsetTop -100 ){
                        
                        layoutCurrent = i;
                        console.log(i+": "+"scrollheight: "+scrollheight+"   elementheight: "+document.getElementById(layoutList[i]).offsetTop+"   layoutcurrent: "+layoutCurrent)
                    }
                }

                resetverticalbuttons()
                
            })
        </script>

        <script>

            // COPY LINK

            var textOriginal;
            const textList = [];
            var textIndex = 0;

            function copyanchor(anchor, id, textReplace) {
                navigator.clipboard.writeText('https://www.gefaengnishefte.org/issue-i' + id);
                var text = anchor.innerText
                if (text != textReplace){
                    textOriginal = text;
                    textList.push(textOriginal)
                
                    anchor.innerText = textReplace;
                    setTimeout(function(){
                        anchor.innerText = textList[textIndex];
                        textIndex = textIndex + 1;
                    }, 3000);
                }
            }
        </script>

        <style>

            #footer {
                display: flex;
                flex-flow: row wrap;
                justify-content: flex-end;
                align-items: flex-start;
                color:white;
                position: absolute;
                height:fit-content;
                bottom:0;
                left:0;
                width:100%;
                z-index: 10;
                background-color: #980000;
            }

            #footercontent {
                display: flex;
                flex-flow: row wrap;
                justify-content: flex-end;
                align-items: flex-start;
                color:white;
                gap:30px;
                padding-left: 20px;
                padding-right: 20px;
            }

            .footerElement {
                text-align: center;
            }

            .footerElement:hover {
                color:white !important;
            }

            #teilen {
                cursor: pointer;
            }


            /* RETURN TO TOP */

            #to-top, #to-bottom {
                cursor: pointer;
                font-size:13pt;
                width:fit-content;
                height:fit-content;
                padding: 10px 25px 10px 25px;
                position: fixed;
                bottom:40px;
                right:20px;
                background-color: var(--header-color);
                color: var(--header-color-text);
                padding:0px;
                width: 45px;
                height: 45px;
                font-size: 35pt;
                -webkit-tap-highlight-color: transparent;
            }

            #to-top {bottom:90px;}
            #to-bottom {bottom:40px;}


            #to-top-label {
                position:relative;
                bottom:16px;
                left:2px;
                transform: rotate(90deg);
                -webkit-transform: rotate(90deg);
                -moz-transform: rotate(90deg);
                -ms-transform: rotate(90deg);
                -o-transform: rotate(90deg);
                -o-transform: rotate(90deg);
            }


            /* REACTIVE */

            .label-s {
                    display: none;
            }

            @media screen and (max-width: 550px) {
                #footercontent {
                    width:100%;
                    justify-content: space-between;
                    justify-content: space-evenly;
                    gap:15px;
                }
            }

            @media screen and (max-width: 300px) {

                #footercontent {
                    gap:0px 20px;
                }

                .label-l {
                    display: none;
                }

                .label-s {
                    display: inline;
                }
            }
 
        </style>
    </head>

    <body>

        <div id="footer">
            <button id="to-top" onclick="verticalup()"><div id="to-top-label">‹</div></button>
            <button id="to-bottom" onclick="verticaldown()"><div id="to-top-label">›</div></button>

            <div id="footercontent">

                <div class="footerElement" id="teilen" >
                    <small class="footerElement"><span class="label-l" onclick="copyanchor(this, '', 'Link kopiert!')">ISSUE teilen</span><span class="label-s" onclick="copyanchor(this, '', 'Link kopiert!')">Teilen</span></small>
                </div>

                <a class="footerElement" id="download-issue" download><span class="label-l">PDF herunterladen</span><span class="label-s">Herunterladen</span></a>
            </div>
        </div>

    </body>
</html>