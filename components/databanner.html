<!DOCTYPE html>
<html>
    <head>

        <script>

            var datainfoshown = false;

            function initcookies() {
                console.log("init1")
                if(localStorage.getItem("gefaengnishefte_cookies") == "true"){
                    showcookiecontent();
                }
                else {
                    hidecookiecontent();
                }
                console.log("init2")
            }

            function cookies(choice) {
                document.getElementById("databanner").style.display = "none";

                if(choice) {
                    localStorage.setItem("gefaengnishefte_cookies", choice);
                }

                initcookies();
            }

            window.addEventListener("beforeunload", function(e){
                cleartpcookies()
            });

            function cleartpcookies() {
                currentchoice = localStorage.getItem("gefaengnishefte_cookies")
                currentlanguage = localStorage.getItem("gefaengnishefte_language")
                clearcookies()
                localStorage.setItem("gefaengnishefte_cookies", currentchoice);
                localStorage.setItem("gefaengnishefte_language", currentlanguage);
            }

            function clearcookies() {
                sessionStorage.clear();
                localStorage.clear();

                var cookies = document.cookie.split(";");

                for (var i = 0; i < cookies.length; i++) {
                    var cookie = cookies[i];
                    var eqPos = cookie.indexOf("=");
                    var name = eqPos > -1 ? cookie.substr(0, eqPos) : cookie;
                    document.cookie = name + "=;expires=Thu, 01 Jan 1970 00:00:00 GMT";
                }
            }

            function showcookiecontent() {
                var frames = document.getElementsByTagName("iframe")
                console.log("showcookiecontent1")
                for (let i = 0; i < frames.length; i++)
                {
                    console.log(frames.length)

                    let frameURL = frames[i].innerHTML

                    frames[i].removeAttribute("sandbox")
                    frames[i].innerHTML = ""
                    frames[i].src = frameURL
                    frames[i].style.display = "block"
                }
                console.log("showcookiecontent7")
                var cookiedisclaimers = document.getElementsByClassName("cookiedisclaimer")

                for (let i = 0; i < cookiedisclaimers.length; i)
                {
                    cookiedisclaimers[i].remove();
                }

                datainfoshown = false;
                console.log("showcookiecontent8")
                cleartpcookies()
                console.log("showcookiecontent9")
            }

            function hidecookiecontent() {
                console.log("hidecookiecontent1")
                if(!datainfoshown) {
                    console.log("hidecookiecontent2")
                    console.log("hidecookiecontent3")
                    var frames = document.getElementsByTagName("iframe")
                    console.log("hidecookiecontent4")
                    for (let i = 0; i < frames.length; i++)
                    {
                        var cookiedisclaimer = document.createElement("span");
                        console.log("hidecookiecontent5")
                        cookiedisclaimer.innerHTML = "<span lang='de'>Dieser Inhalt erfordert die <span style='text-decoration: underline; cursor: pointer;' onclick='showdatabanner()'>Zustimmung zu Cookies</span>.</span><span lang='en'>This content requires your <span style='text-decoration: underline; cursor: pointer;' onclick='showdatabanner()'>consent to the use of cookies</span>.</span>";
                        cookiedisclaimer.className = "cookiedisclaimer";
                        console.log("hidecookiecontent6")
                        frames[i].style.display = "none"
                        frames[i].parentNode.insertBefore(cookiedisclaimer, frames[i])
                        console.log("hidecookiecontent7")
                        
                        datainfoshown = true;
                    }
                    console.log("hidecookiecontent8")
                }
                console.log("hidecookiecontent9")
            }

            function showdatabanner() {
                document.getElementById("databanner").style.display = "block";
            }

        </script>

        <style>

            #databanner {
                display:none;
            }

            #datenschutz {
                background-color: var(--header-color);
                color: white;
                font-size: 13pt;
                position: absolute;
                left: 0;
                bottom: 0;
                width:100%;
                z-index: 20;
            }

            #datainfo {
                width: 600px;
                margin-bottom: 40px;
            }

            #dataoptionen {
                display:flex;
                flex-flow: row wrap;
                align-items: center;
                gap:20px;
            }

            .dataoption {
                width:140px;
                cursor: pointer;
                font-size: 13pt;
                background-color: transparent;
                color:white;
            }

            #datenschutz-inner {
                padding:20px;
            }

            @media screen and (max-width: 450px) {#dataoptionen { justify-content: space-around;}}


        </style>
    </head>

    <body>

        <div id="datenschutz">
            <div id="datenschutz-inner">
                <div id="datainfo">
                    <span lang="de">Um bestimmte Inhalte von anderen Seiten anzeigen zu können, sind Cookies notwendig. Durch das Klicken des Akzeptieren-Buttons, kannst du deren Verwendung zustimmen. Weitere Informationen dazu findest du in unserer <a style="text-decoration: underline;" href="https://www.GEFAENGNISHEFTE.org/datenschutz" target="_blank">Datenschutzerklärung</a>.</span><span lang="en">In order to show certain content from other websites the use of cookies is necessary. By clicking accept you can agree to their use. Further information about this can be found in our <a style="text-decoration: underline;" href="https://www.GEFAENGNISHEFTE.org/datenschutz" target="_blank">data protection section</a>.</span>
                </div>
                <div id="dataoptionen">
                    <button class="dataoption" onclick="cookies(true)"><span lang="de">Akzeptieren</span><span lang="en">Accept</span></button>
                    <button class="dataoption" onclick="cookies(false)"><span lang="de">Ablehnen</span><span lang="en"></span>Reject</button>
                </div>
            </div>
        </div>
    </body>
</html>