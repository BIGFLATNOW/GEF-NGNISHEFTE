<!DOCTYPE html>
<html>
    <head>

        <script>

            var datainfoshown = false;

            function initcookies() {
                
                if(localStorage.getItem("gefaengnishefte_cookies") == "true"){
                    showcookiecontent();
                }
                else {
                    hidecookiecontent();
                }
                
            }

            function cookies(choice) {
                document.getElementById("databanner").style.display = "none";

                if(choice) {
                    localStorage.setItem("gefaengnishefte_cookies", choice);
                }

                initcookies();
            }

            window.addEventListener("beforeunload", function(e){
                cleartpcookies()
            });

            function cleartpcookies() {
                var currentchoice = localStorage.getItem("gefaengnishefte_cookies")
                var currentlanguage = localStorage.getItem("gefaengnishefte_language")
                clearcookies()
                localStorage.setItem("gefaengnishefte_cookies", currentchoice);
                localStorage.setItem("gefaengnishefte_language", currentlanguage);
            }

            function clearcookies() {
                sessionStorage.clear();
                localStorage.clear();

                var cookies = document.cookie.split(";");

                for (var i = 0; i < cookies.length; i++) {
                    var cookie = cookies[i];
                    var eqPos = cookie.indexOf("=");
                    var name = eqPos > -1 ? cookie.substr(0, eqPos) : cookie;
                    document.cookie = name + "=;expires=Thu, 01 Jan 1970 00:00:00 GMT";
                }
            }

            function showcookiecontent() {
                var frames = document.getElementsByTagName("iframe")
                
                for (let i = 0; i < frames.length; i++)
                {
                    let frameURL = frames[i].innerHTML

                    if(frames[i].getAttribute('data-source') !== "youtube") {
                        frames[i].removeAttribute("sandbox")
                        frames[i].innerHTML = ""
                        frames[i].src = frameURL
                        frames[i].style.display = "block"
                    }
                    else {
                        frames[i].style.display = "none"
                        frames[i].title = "YouTube video player"
                        frames[i].allow = "accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                        frames[i].setAttribute('allowFullScreen', '')

                        let thumbnail = document.createElement("div");
                        thumbnail.innerHTML = "<img class='thumbnail' src='https://img.youtube.com/vi/" + frames[i].getAttribute('data-id') + "/mqdefault.jpg'><div class='yt-controls-wrap'><button class='play' onclick='play(this)'>PLAY</button><span class='yt-title'></span></div>";
                        thumbnail.className = "lazythumbnail";

                        frames[i].parentNode.insertBefore(thumbnail, frames[i])
                        thumbnail.firstChild.classList.add(frames[i].className);
                    }
                }
                
                var cookiedisclaimers = document.getElementsByClassName("cookiedisclaimer")

                for (let i = 0; i < cookiedisclaimers.length; i)
                {
                    cookiedisclaimers[i].remove();
                }

                datainfoshown = false;
                cleartpcookies()
            }

            function play(button) {

                let thumbnail = button.parentNode.parentNode
                let frame = thumbnail.nextSibling

                frame.removeAttribute("sandbox")

                if(frame.getAttribute('data-list') !== null) {
                    frame.src = "https://www.youtube-nocookie.com/embed/" + frame.getAttribute('data-id') + "?list=" + frame.getAttribute('data-list')
                }
                else {
                    frame.src = "https://www.youtube-nocookie.com/embed/" + frame.getAttribute('data-id') + "?modestbranding=1&enablejsapi=1"
                }

                frame.onload = function(){
                    thumbnail.style.display = "none"
                    frame.style.display = "block"
                    frame.contentWindow.postMessage('{"event":"command","func":"playVideo","args":""}', '*')
                };
            }

            function hidecookiecontent() {
                
                if(!datainfoshown) {
                    
                    var frames = document.getElementsByTagName("iframe")
                    
                    for (let i = 0; i < frames.length; i++)
                    {
                        var cookiedisclaimer = document.createElement("span");
                        cookiedisclaimer.innerHTML = "<span lang='de'>Dieser Inhalt erfordert die <span style='text-decoration: underline; cursor: pointer;' onclick='showdatabanner()'>Zustimmung zu Cookies</span>.</span><span lang='en'>This content requires your <span style='text-decoration: underline; cursor: pointer;' onclick='showdatabanner()'>consent to the use of cookies</span>.</span>";
                        cookiedisclaimer.className = "cookiedisclaimer";
                        
                        // frames[i].style.display = "none"
                        frames[i].parentNode.insertBefore(cookiedisclaimer, frames[i])
                        
                        datainfoshown = true;
                    }
                }
            }

            function showdatabanner() {
                document.getElementById("databanner").style.display = "block";
            }

        </script>

        <style>

            #databanner {
                display:none;
            }

            #datenschutz {
                background-color: var(--header-color);
                color: white;
                font-size: 13pt;
                position: absolute;
                left: 0;
                bottom: 0;
                width:100%;
                z-index: 20;
            }

            #datainfo {
                width: 600px;
                margin-bottom: 40px;
            }

            #dataoptionen {
                display:flex;
                flex-flow: row wrap;
                align-items: center;
                gap:20px;
            }

            .dataoption {
                width:140px;
                cursor: pointer;
                font-size: 13pt;
                background-color: transparent;
                color:white;
            }

            #datenschutz-inner {
                padding:20px;
            }

            @media screen and (max-width: 450px) {#dataoptionen { justify-content: space-around;}}


            /* LAZY LOADING YOUTUBE */

            .play {
                /* font-weight: 700; */
                font-size: 11pt;
                /* padding: 0px 15px; */
                height: 30px;
                width: 60px;
            }

            .lazythumbnail {
                display: flex;
                flex-direction: column;
                justify-content: center;
                gap:10px
            }

            .thumbnail {
                aspect-ratio:16/9;
            }

            .yt-controls-wrap {
                display: flex;
                flex-wrap: wrap;
                justify-content: center;
                gap:10px
            }

            .yt-title {
                font-size: 15pt;
                text-align: center;
            }

        </style>
    </head>

    <body>
        <div class="slideRow">
            <!--Jalava Lied-->                                                                    <iframe id="testvideo" class="medium" style="aspect-ratio: 16/9"  src="about:blank" sandbox loading="lazy" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture">https://www.youtube-nocookie.com/embed/_ArVh3Cj9rw?modestbranding=1&enablejsapi=1</iframe>
        </div>
        <div id="datenschutz">
            <div id="datenschutz-inner">
                <div id="datainfo">
                    <span lang="de">Um bestimmte Inhalte von anderen Seiten anzeigen zu können, sind Cookies notwendig. Durch das Klicken des Akzeptieren-Buttons, kannst du deren Verwendung zustimmen. Weitere Informationen dazu findest du in unserer <a style="text-decoration: underline;" href="https://www.GEFAENGNISHEFTE.org/datenschutz" target="_blank">Datenschutzerklärung</a>.</span><span lang="en">In order to show certain content from other websites the use of cookies is necessary. By clicking accept you can agree to their use. Further information about this can be found in our <a style="text-decoration: underline;" href="https://www.GEFAENGNISHEFTE.org/datenschutz" target="_blank">data protection section</a>.</span>
                </div>
                <div id="dataoptionen">
                    <button class="dataoption" onclick="cookies(true)"><span lang="de">Akzeptieren</span><span lang="en">Accept</span></button>
                    <button class="dataoption" onclick="cookies(false)"><span lang="de">Ablehnen</span><span lang="en"></span>Reject</button>
                </div>
            </div>
        </div>
    </body>
</html>