<!DOCTYPE html>
<html>
	<head>

		<script>

			/////////////////////////////////////////////////////////////////////////////////////////////////////////////////
			//////////////////////////////////////////////////// GENERAL ////////////////////////////////////////////////////
			/////////////////////////////////////////////////////////////////////////////////////////////////////////////////


			// HEIGHTFIX

			let vh = window.innerHeight * 0.01;
			document.documentElement.style.setProperty('--vh', `${vh}px`);

			window.addEventListener('resize', () => {
				let vh = window.innerHeight * 0.01;
				document.documentElement.style.setProperty('--vh', `${vh}px`);
			});

			
			// CUSTOM SCROLLBAR
			
			var timeoutid;

			function hidescrollbar() {
				document.documentElement.style.setProperty('--scrollbar-color', 'transparent');
			}

			document.getElementById("content").addEventListener("scroll", () => {
				document.documentElement.style.setProperty('--scrollbar-color', getComputedStyle(document.documentElement).getPropertyValue('--default-scrollbar-color'));
				clearTimeout(timeoutid)
				timeoutid = setTimeout(hidescrollbar, 3000);
			});


			// LANGUAGE

						function initlanguage() {
				if(localStorage.getItem("gefaengnishefte_language") != "de" && localStorage.getItem("gefaengnishefte_language") != "en") {
					localStorage.setItem("gefaengnishefte_language", "de");
				}

				setlanguage(localStorage.getItem("gefaengnishefte_language"))
			}

			function setlanguage(language) {

				$('[lang="de"]').hide();
				$('[lang="en"]').hide();
				document.getElementById("lang-de").style.textDecoration = "none"
				document.getElementById("lang-en").style.textDecoration = "none"
				document.getElementById("lang-" + language).style.textDecoration = "underline"
				$('*:lang(' + language + '):not(br)').show();

				localStorage.setItem("gefaengnishefte_language", language);	
			}


			// VIDEO PAUSER

			function pausevideos() {
				var frames = document.getElementsByTagName("iframe")

				for (let i = 0; i < frames.length; i++)
				{
					frames[i].contentWindow.postMessage('{"event":"command","func":"pauseVideo","args":""}', '*')
				}
			}


			// ID CREATION

						function makeid(length) {
                var result           = '';
                var characters       = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
                var charactersLength = characters.length;
                for ( var i = 0; i < length; i++ ) {
                    result += characters.charAt(Math.floor(Math.random() * charactersLength));
                }

                return result;
            }



			/////////////////////////////////////////////////////////////////////////////////////////////////////////////////
			///////////////////////////////////////////////////// MENUS /////////////////////////////////////////////////////
			/////////////////////////////////////////////////////////////////////////////////////////////////////////////////


			// DROPMENU

			var menuopen = false;
			var windowwidth = $(window).width();

            window.addEventListener("resize", (event) => {
				
				if ($(window).width()!=windowwidth) {

					windowwidth = $(window).width();

					closemenu()

					if ($(window).width() < 800 && !menuopen) {
						document.getElementById("openmenu").style.display = "inline";
					}
					else {
						document.getElementById("openmenu").style.display = "none";
					}
				}
            });

			function openmenu(menu, anchor) {
				hidedropmenus();
				document.getElementById(menu).style.height = "fit-content";
				document.getElementById(anchor).style.visibility = "visible";

				if ($(window).width() > 800) {
					document.getElementById(menu).style.width = document.getElementById("navigation").offsetWidth + 201 + 'px'; // og value 30
					// document.getElementById(menu).style.border = "2px outset grey";
				}
				else {
					document.getElementById(menu).style.width = "100vw";
					document.getElementById("headerlogo").style.visibility = "hidden";
					document.getElementById("openmenu").style.display = "none";
					document.getElementById("closemenu").style.display = "inline";
					document.documentElement.style.setProperty('--header-divider', `block`);
				}

				menuopen = true
			}

			function safeclosemenu() {
				if(document.getElementById("aboinput") !== document.activeElement && document.getElementById("abocheckbox") !== document.activeElement && document.getElementById("email-abo-btn") !== document.activeElement) {
					closemenu()
					document.getElementById("aboinfo").style.display = "none"
				}
			}

			function closemenu() {

				hidedropmenus();

				if ($(window).width() < 800) {
					document.getElementById("headerlogo").style.visibility = "visible";
					document.getElementById("closemenu").style.display = "none";
					document.getElementById("openmenu").style.display = "inline";
				}

				menuopen = false
			}

			function hidedropmenus() {
				var dropmenus = document.getElementsByClassName("dropmenu")

				for (let i = 0; i < dropmenus.length; i++)
				{
					dropmenus[i].style.width = "0vw";
					dropmenus[i].style.border = "none transparent";
				}
			}

			// NAVIGATION HIGHLIGHT
			
			var highlights = [
                            ["", "dropanchori"],
							["/", "dropanchori"],
							["/issue-i", "dropanchori"],
							["/issue-i", "info-issue-i"],
							["/kanon", "dropanchork"],

							["", "descriptioni"],
							["/", "descriptioni"],
							["/issue-i", "descriptioni"],
							["/issue-i", "descriptionisi"],
							["/kanon", "descriptionk"],

							["/deabonnieren", "etc"],
							["/deabonnieren", "descriptiond"],

							["/impressum", "etc"],
							["/impressum", "descriptionim"],

							["/datenschutz", "etc"],
							["/datenschutz", "descriptionda"]
            ];
			
			$(function(){
				for ( var i = 0; i < highlights.length; i++ ) {

					var pair = highlights[i]

					if (window.location.href.toLowerCase() == ("https://www.GEFAENGNISHEFTE.org" + pair[0]).toLowerCase()) {
						document.getElementById(pair[1]).style.fontWeight = "700";
					}
                }
			});
			

			
			/////////////////////////////////////////////////////////////////////////////////////////////////////////////////
			////////////////////////////////////////////////////// ABO //////////////////////////////////////////////////////
			/////////////////////////////////////////////////////////////////////////////////////////////////////////////////

			
			// ABONNIEREN
	
			document.getElementById("emailabonnieren").addEventListener('submit', function(event){

				event.preventDefault()

				$.ajax({
					method: 'POST',
					url: 'https://formsubmit.co/ajax/6d2bd15bcc3410a47e44b78943d390d0',
					dataType: 'json',
					accepts: 'application/json',
					data: $(event.target).serialize() + "&Code=" + makeid(40)
					,
					success: (data) => console.log("submitted"),
					error: (err) => alert(err)
				});

				document.getElementById("email-abo-btn").textContent = '<span lang="de">Abonniert!</span><span lang="en">Subscribed!</span>';
				document.getElementById("email-abo-btn").disabled = true;
				document.getElementById("aboinfo").style.display = "none";
				initlanguage() //needed bc it changes DOM
			})

			document.getElementById("email-form").addEventListener('input', function(event){
				document.getElementById("email-abo-btn").innerHTML = '<span lang="de">Abonnieren</span><span lang="en">Subscribe</span>';
				document.getElementById("email-abo-btn").disabled = false;
				initlanguage() //needed bc it changes DOM
			});


			// SWITCH ABO TYPE
			
			function initsetabo() {
				if(localStorage.getItem("gefaengnishefte_abo") != "email" && localStorage.getItem("gefaengnishefte_abo") != "telegram") {
					localStorage.setItem("gefaengnishefte_abo", "email");
				}

				setabo(localStorage.getItem("gefaengnishefte_abo"))
			}

			function setabo(type) {

				document.getElementById('email-form').style.display = "none";
				document.getElementById('telegram-form').style.display = "none"

				document.getElementById("email-abo-opt").style.textDecoration = "none"
				document.getElementById("telegram-abo-opt").style.textDecoration = "none"

				if(type == "telegram") {
					document.getElementById("aboinfo").style.display = "none"
				}

				document.getElementById(type + '-abo-opt').style.textDecoration = "underline"
				document.getElementById(type + '-form').style.display = "flex";

				localStorage.setItem("gefaengnishefte_abo", type);	
			}

			// FOCUS

			document.getElementById("aboinput").addEventListener('focus', (event) => {
				document.getElementById("aboinfo").style.display = "block"
			});

		</script>

		<style>

			/* GENERAL */

			#header-wrap {
				display: flex;
				justify-content: space-between;
				align-items: center;
				padding:0px;
				margin:0px;
				font-size: 13pt;
			}

			#navigation {
				display: flex;
				gap: 30px;
				padding:15px 20px 15px 10px;
			}

			a:active, a:visited, a:link {
				color: white;
				transition: 0.1s;
			}

			a:hover {
				color: lightgrey;
				transition: 0.1s;
			}


			/* DROPMENU */

			.dropmenu {
				overflow:hidden;
				white-space: nowrap;
				position:absolute;
				right:0;
				top:0;
				width: 0vw;
				background-color: var(--header-color);
				z-index:11;
			}

			.dropanchor {
				position: relative;
				z-index:12;
			}

			.menu-spacer {
				text-align: right;
				visibility: hidden;
				font-size: 13pt;
				padding:15px 20px 15px 20px; /* reduced by 1 top and bottom for border */
				margin: 0px;
				-webkit-touch-callout: none;
				-webkit-user-select: none;
				-khtml-user-select: none;
				-moz-user-select: none;
				-ms-user-select: none;
				user-select: none;
			}

			#showissues:hover, #hideissues:hover {
				color: lightgray;
			}

			#showissues, #hideissues {
				cursor: pointer;
			}


			/* EXPANDED */

			#closemenu, #openmenu {
				cursor: pointer;
			}

			#closemenu {
				display: none;
				width:100vw;
			}

			.description {
				font-size: 11pt;
			}

			#hideissues {
				display: none;
			}

			#footer-wrap {
				font-size: 11pt;
				line-height: 1.7;
				margin-bottom:40px;
				text-align: left;
				white-space: normal;
			}

			.lang-option {
				cursor: pointer;
			}

			
			/* INFO */

			.info {
				padding: 25px 40px 25px 40px;
				line-height: 1.7;
				font-size: 13pt;
			}

			#infos, #infok {
				text-align: left;
			}

			#infoi {
				font-size: 13pt;
			}

			#infoe, #infom {
				max-width: 400px;
				margin-left: auto;
				margin-right: auto;
			}

			#infom {
				padding-bottom:40px;
			}

			#infoe {
				margin-top: 0px;
				padding-top: 0px;
			}

			.menu-inside {
				border: 2px outset grey;
			}


			/* TEXT ALIGN LAST */

			.spacedissues, .spacedtitles {
				width:100%;
				display:flex;
				justify-content: space-between;
				align-items: center;
			}
			
			/* FORM */

			#etc {
				cursor: default;
			}

			#openmenu {
				cursor: pointer;
			}

			#abocheckbox {
				display:inline;
				position: absolute;
				top: 3px;
			}

			#aboinfo {
				display:none;
				font-size: 9pt;
				line-height: 1.3 !important;
				text-align: justify;
				white-space: pre-wrap;
				order:-1;
			}

			#telegramabo {
				font-size: 11pt;
				line-height: 1.3 !important;
				white-space: pre-wrap;
				order:-1;
			}

			#abocheckbox {
				position:relative;
				width: 15px;
				height:15px;
				margin:0;
				margin-top:20px;
			}

			#aboselect{
				font-size: 11pt;
				line-height: 1.3 !important;
			}

			#telegramabonnieren {
				display: none;
			}

			#telegram-abo-btn {
				width: 100%;
				text-align:center !important;
			}

			#telegram-abo-btn * {
				padding: 0 !important;
			}

			/* REACTIVE */

			@media screen and (width >= 800px) {

				#openmenu {
					display: none;
				}

				#infoe {
					display: none;
				}

				#menuspacer {
					display:none;
					background-color: lightgray;
				}
			}

			@media screen and (width < 800px) {

				.hmenu, #etc {
					display: none;
				}

				.menu-inside {
					border-right: 0px none transparent;
					border-left: 0px none transparent;
					border-top: 2px solid lightgrey;
					border-bottom: 2px solid lightgrey;
				}
			}

			@media screen and (max-width: 400px) {
				.desclarge {
					display:none;
				}
			}

		</style>
	</head>

	<body>
		<div id="header-wrap">

			<div id="headerlogo" class="logo"><a href="https://www.GEFAENGNISHEFTE.org">GEFÄNGNISHEFTE</a></div> 

			<nav id="navigation" onmouseleave="safeclosemenu()">

				<!-- ISSUES -->

				<div class="hmenu" onmouseenter="openmenu('dropmenui', 'dropanchori')">
					<span class="dropanchor" id="dropanchori">
						<a href="https://www.GEFAENGNISHEFTE.org">ISSUES</a>
					</span>

					<div class="dropmenu" id="dropmenui" >
						<div class="menu-spacer">X</div>
						<div class="menu-inside">
						<div class="info" id="infoi">
							<a id="info-issue-i" class="spacedissues" href="https://www.GEFAENGNISHEFTE.org/issue-i"><span>ISSUE I</span> <span lang="de">ALTERNATIVE UTOPIEN</span><span lang="en">ALTERNATIVE UTOPIAS</span></a>
							<a id="info-issue-ii" class="spacedissues" href="https://www.GEFAENGNISHEFTE.org/issue-i"><span>ISSUE II</span> <span lang="de">REFORM ODER REVOLUTION</span><span lang="en">REFORM OR REVOLUTION</span></a>
						</div></div>
					</div>
				</div>

				<!-- KANON -->

				<div class="hmenu" onmouseenter="openmenu('dropmenuk', 'dropanchork')">
					<span class="dropanchor" id="dropanchork">
						<a href="https://www.GEFAENGNISHEFTE.org/kanon">KANON</a>
					</span>

					<div class="dropmenu" id="dropmenuk">
						<div class="menu-spacer">X</div>
						<div class="menu-inside">
						<div class="info" id="infok">
							<a href="https://www.GEFAENGNISHEFTE.org/kanon"><span lang="de">Eine Zusammenstellung sehenswerter Inhalte</span><span lang="en">A collection of content worth watching</span></a>
						</div></div>
					</div>
				</div>

				<!-- MENU/ETC -->

				<div onmouseenter="openmenu('dropmenum', 'dropanchorm')">
					<span class="dropanchor" id="dropanchorm">
						<span class="label" id="etc" onclick="openmenu('dropmenum', 'dropanchorm')">ETC</span>
						<span class="label" id="openmenu" onclick="openmenu('dropmenum', 'dropanchorm')"><span lang="de">MENÜ</span><span lang="en">MENU</span></span>
						<span class="label" id="closemenu" onclick="safeclosemenu()">X</span>
					</span>

					<!-- NAV -->

					<div class="dropmenu" id="dropmenum">
						<div class="menu-spacer">X</div>

						<!-- EXPANDEDMENU -->

						<div class="info" id="infoe">
							<div class="spacedtitles">
								<a href="https://www.GEFAENGNISHEFTE.org"><span id="descriptioni">ISSUES</span></a>
							</div>
							<div  class="spacedtitles">
								<a href="https://www.GEFAENGNISHEFTE.org/kanon" class="spacedtitles"><span id="descriptionk">KANON</span>
								</a>
							</div>
						</div>
						
						<!-- INFO -->
						<div class="menu-inside">
						<div class="info" id="infom">
							
							<div id="footer-wrap"class="info-inner">
								<a href="https://www.paypal.com/paypalme/GEFAENGNISHEFTE"><span lang="de">Unterstützen</span><span lang="en">Support</span><span class="desclarge">: paypal.me/GEFAENGNISHEFTE</span><br></a>
								<a href="mailto:GEFAENGNISHEFTE@riseup.net"><span lang="de">Kontaktieren</span><span lang="en">Contact</span><span class="desclarge">: GEFAENGNISHEFTE@riseup.net</span><br></a>
								<a href="https://www.GEFAENGNISHEFTE.org/impressum" id="descriptionim"><span lang="de">Impressum</span><span lang="en">Legal Notice</span><br></a>
								<a href="https://www.GEFAENGNISHEFTE.org/datenschutz" id="descriptionda"><span lang="de">Datenschutzerklärung</span><span lang="en">Privacy policy</span><br></a>
								<span><span class="lang-option" id="lang-de" onclick="setlanguage('de')">DE</span> / <span class="lang-option" id="lang-en" onclick="setlanguage('en')">EN</span><br></span>
							</div>

	
							<div class="info-inner">

								<span id="aboselect">
									<span lang="de">Abonnieren mit:</span><span lang="en">Subscribe via:</span>
									<span class="lang-option" id="email-abo-opt" onclick="setabo('email')">Email</span> / 
									<span class="lang-option" id="telegram-abo-opt" onclick="setabo('telegram')">Telegram</span><br>
								</span>

								<form id="email-form" class="abo">
									<button type="submit" id="email-abo-btn"><span lang="de">Abonnieren</span><span lang="en">Subscribe</span></button>
									<span><input type="email" name="Email" id="aboinput" placeholder="Email" required></span>
									<input type="hidden" name="_subject" value="Abonnement">
									<input type="hidden" name="_captcha" value="true">
								</form>
								<label id="aboinfo" for="abocheckbox"><input type="checkbox" id="abocheckbox" required>   <span lang="de">Ich möchte über neue ISSUES benachrichtigt werden. <br><br>Hinweise zum Widerruf und der Verarbeitung deiner Daten geben wir in unserer <a href="https://www.GEFAENGNISHEFTE.org/datenschutz">Datenschutzerklärung</a>. Einen Link zum <a href="https://www.GEFAENGNISHEFTE.org/deabonnieren">Deabonnieren</a> findest du in jeder Mail.</span><span lang="en">I want to be notified about new ISSUES. <br><br>We provide information on revocation and the processing of your data in our <a href="https://www.GEFAENGNISHEFTE.org/datenschutz">data protection section</a>. A link to <a href="https://www.GEFAENGNISHEFTE.org/deabonnieren">unsubscribe</a> is included in every mail.</span></label>
								
								<form id="telegram-form" class="abo" action="https://t.me/GEFAENGNISHEFTE" target="_blank">
									<button type="submit" id="telegram-abo-btn"><span lang="de">t.me/GEFAENGNISHEFTE</span><span lang="en">t.me/GEFAENGNISHEFTE</span></button></button>
								</form>

							</div>
						</div>
						</div>
					</div>
				</div>
			</nav>

		</div>
	</body>
</html>