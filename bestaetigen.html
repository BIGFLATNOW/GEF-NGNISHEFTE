<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>BESTÄTIGEN</title>
        <meta name="viewport" content="width=device-width, height=device-height, user-scalable=no">
        <meta name="description" content="Email Adresse bestätigen.">
        <meta property="og:url" content="GEFAENGNISHEFTE.org/BESTAETIGEN"/>
        <meta property="og:type" content="website"/>
        <meta property="og:site_name" content="GEFÄNGNISHEFTE"/>
        <meta property="og:title" content="BESTÄTIGEN"/>
        <meta property="og:description" content="Email Adresse bestätigen."/>
        <meta property="og:image" itemprop="image" content="images/internal/ogred_rectangle.jpg"/>
        <meta property="og:image:type" content="image/jpeg"/>
        <meta property="og:image:width" content="1200"/>
        <meta property="og:image:height" content="630"/>
        <meta name="twitter:card" content="summary_large_image" />
        <meta name="twitter:image" content="images/internal/ogred_square.jpg" />
        <link rel="shortcut icon" href="images/internal/faviconred.ico">
        <link rel="apple-touch-icon" sizes="16x16" href="images/internal/faviconred.ico">
        <link rel="icon" type="image/x-icon" href="images/internal/faviconred.ico">
        <link rel="stylesheet" href="styles/fonts.css">
        <link rel="stylesheet" href="styles/general.css">
        <link rel="stylesheet" href="styles/red.css">
        <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
        <script>

            // LOADING

            var headerloaded, footerloaded, controlsloaded, databannerloaded = false;
            
            $(function(){
                $("#header").load("components/header.html", function() {headerloaded = true; init()});
                $("#databanner").load("components/databanner.html", function() {databannerloaded = true; init()});
            });

            function init() {
                if(headerloaded && databannerloaded){
                    initcookies();
                    initlanguage();
                    initsetabo();
                }
            }
        
        </script>

		<script>
            
			// BESTÄTIGEN

            const params = new Proxy(new URLSearchParams(window.location.search), {
                get: (searchParams, prop) => searchParams.get(prop),
            });

            let code = params.code;

            document.addEventListener("DOMContentLoaded", () => {

                $.ajax({
                    method: 'POST',
                    url: 'https://formsubmit.co/ajax/6d2bd15bcc3410a47e44b78943d390d0',
                    dataType: 'json',
                    accepts: 'application/json',
                    data: "Code=" + code + "&_subject=Bestätigungsmail&_captcha=true"
                    ,
                    success: (data) => console.log(data),
                    error: (err) => alert(err)
                });

                document.getElementById("bestätigungsinfo").innerHTML = "<span lang='de'>Deine E-mail wurde erfolgreich bestätigt!</span><span lang='en'>Your E-Mail has been confirmed successfully!</span>";
            });


		</script>

        <style>

            #bestätigungsinfo {
                margin-top:20vh;
                margin-left:auto;
                margin-right:auto;
                width:fit-content;
            }

        </style>
    </head>

    <body>

        <div id="header"></div>

        <div id="content">
            <div id="bestätigungsinfo">
                <span lang='de'>Etwas ist bei der Bestätigung schiefgelaufen.<br>Bitte versuche es noch einmal, oder schreibe Nachricht an <a href="mailto:GEFAENGNISHEFTE@riseup.net">GEFAENGNISHEFTE@riseup.net</a></span><span lang='en'>Something went wrong during the confirmation process.<br>Please try again, or message us at <a href="mailto:GEFAENGNISHEFTE@riseup.net">GEFAENGNISHEFTE@riseup.net</a></span>
            </div>
        </div>

        <div id="databanner"></div>
    </body>
</html>
