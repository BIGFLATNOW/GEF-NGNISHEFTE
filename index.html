<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>ISSUES</title>
        <meta name="viewport" content="width=device-width, height=device-height, user-scalable=no">
        <meta name="description" content="Gedanken einer politisch desinteressierten Jugend.">
        <meta property="og:type" content="website"/>
        <meta property="og:site_name" content="GEFÄNGNISHEFTE"/>
        <meta property="og:title" content="ISSUES"/>
        <meta property="og:description" content="Gedanken einer politisch desinteressierten Jugend."/>
        <meta property="og:image" itemprop="image" content="https://www.gefaengnishefte.org/images/opengraph/red_2x1.jpg"/>
        <meta property="og:image:type" content="image/jpeg"/>
        <meta property="og:image:width" content="1200"/>
        <meta property="og:image:height" content="630"/>
        <meta name="twitter:card" content="summary_large_image" />
        <meta name="twitter:image" content="https://www.gefaengnishefte.org/images/opengraph/red_1x1.jpg" />

        <!-- https://realfavicongenerator.net/ -->
        <link rel="apple-touch-icon" sizes="180x180" href="images/favicon/red/apple-touch-icon.png">
        <link rel="icon" type="image/png" sizes="32x32" href="images/favicon/red/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="images/favicon/red/favicon-16x16.png">
        <link rel="manifest" href="images/favicon/red/site.webmanifest">
        <link rel="mask-icon" href="images/favicon/red/safari-pinned-tab.svg" color="#980000">
        <link rel="shortcut icon" href="images/favicon/red/favicon.ico">
        <meta name="apple-mobile-web-app-title" content="GEF&Auml;NGNISHEFTE">
        <meta name="application-name" content="GEF&Auml;NGNISHEFTE">
        <meta name="msapplication-TileColor" content="#000000">
        <meta name="msapplication-config" content="images/favicon/red/browserconfig.xml">
        <meta name="theme-color" content="#980000">
        
        <link rel="stylesheet" href="styles/fonts.css">
        <link rel="stylesheet" href="styles/general.css">
        <link rel="stylesheet" href="styles/red.css">

        <link rel="preload" as="font" crossorigin type="font/woff2" href="https://www.gefaengnishefte.org/fonts/Spectral/Spectral-Regular.woff2">
        <link rel="preload" as="font" crossorigin type="font/woff2" href="https://www.gefaengnishefte.org/fonts/Spectral/Spectral-Bold.woff2">
        <link rel="preload" as="font" crossorigin type="font/woff2" href="https://www.gefaengnishefte.org/fonts/Spectral/Spectral-Italic.woff2">
        
        <link rel="preload" as="fetch" crossorigin href="components/header.html">
        <link rel="preload" as="fetch" crossorigin href="components/controls.html">
        <link rel="preload" as="fetch" crossorigin href="components/databanner.html">

        <link rel="preload" as="image" fetchpriority="high" href="images/issues/de/issue-i-cover.WebP">
        <link rel="preload" as="image" fetchpriority="high" href="images/issues/en/issue-i-cover.WebP">


        <script type="text/javascript" src="components/common.js"></script>
        <script type="text/javascript">

            // VARIABLES

            const autohidecontrols = false;
            const overridetitletext = "<span class='overridetitletextLarge'><span lang='de'>ÜBERSICHT</span><span lang='en'>OVERVIEW</span></span><span class='overridetitletextSmall'>#</span>"

            const issues = [
                {
                    no: "ISSUE I",
                    title_no: "title-i",
                    title_de: "ALTERNATIVE <br class='spacedissuebreaks'>UTOPIEN",
                    title_en: "ALTERNATIVE <br class='spacedissuebreaks'>UTOPIAS",
                    cover_de: "images/issues/de/issue-i-cover.WebP",
                    cover_en: "images/issues/en/issue-i-cover.WebP",
                    url: "https://www.GEFAENGNISHEFTE.org/issue-i"
                },
                {
                    no: "ISSUE II",
                    title_no: "title-ii",
                    title_de: "REFORM ODER <br class='spacedissuebreaks'>REVOLUTION",
                    title_en: "REFORM OR <br class='spacedissuebreaks'>REVOLUTION",
                    cover_de: "images/issues/de/issue-ii-cover.WebP",
                    cover_en: "images/issues/en/issue-ii-cover.WebP",
                    url: "https://www.GEFAENGNISHEFTE.org/issue-i"
                },
                {
                    no: "ISSUE III",
                    title_no: "title-iii",
                    title_de: "REGELN DES <br class='spacedissuebreaks'>ALGORHYTMUS",
                    title_en: "ALGORITHMIC <br class='spacedissuebreaks'>RULE",
                    cover_de: "images/issues/de/issue-i-cover.WebP",
                    cover_en: "images/issues/en/issue-i-cover.WebP",
                    url: "https://www.GEFAENGNISHEFTE.org/issue-i"
                }
            ]

            // TEMPLATES

            function index_template(slide, i){let issue = issues[i]; return '<span id="index' + i + '" class="indexitem" onclick="displayBySlideIndex(' + i + ')"><span class="slideIndexSpaced"><span class="slideIndexSpacedIssue">' + issue.no + '</span><span lang="de">' + issue.title_de + '</span><span lang="en">' + issue.title_en + '</span></span></span><br>'}
            function index_title_template(i){let issue = issues[i]; return '<a class="title-inner" href=' + issue.url + '><span class="slideIndexSpacedIssue">' + issue.no + '</span><span lang="de">' + issue.title_de + '</span><span lang="en">' + issue.title_en + '</span></a>'}
            function cover_template(i){let issue = issues[i]; return '<div class="slide-cover"><a class="cover" href=' + issue.url + '><img class="cover-image" loading="lazy" lang="de" src=' + issue.cover_de + ' alt=' + issue.no + ' COVER/><img class="cover-image" loading="lazy" lang="en" hidden src=' + issue.cover_en + ' alt=' + issue.no + 'COVER/></a></div>'}
            function title_template(i){let issue = issues[i]; return '<a class="title" onmouseover="displayBySlideIndex(' + i + ')" href=' + issue.url + '><span>' + issue.no + '</span><span lang="de">' + issue.title_de + '</span><span lang="en">' + issue.title_en + '</span></a><hr>'}

            // LOADING

            function preload() {
                if(localStorage.getItem("gefaengnishefte_language")) {
                    load(issues, localStorage.getItem("gefaengnishefte_language"))
                }
                else {
                    load(issues, "de")
                }
            }

            function load(list, lang) {
                for (let i = 0; i < list.length; i++) {
                    var img = new Image();
                    img.src = list[i]["cover_" + lang]
                }
            }

            (() => {preload()})()

            document.addEventListener("DOMContentLoaded", preinit)

            function preinit() {
                console.log("DOM")
                initcovers()
                seteagerload()
                init_prevent_touch_response()
                console.log("DOM!")
            }

            fetchcomponents(["header", "controls", "databanner"])

            function init() {
                console.log("INIT")
                initcovers();
                initcontrols();
                displayBySlideIndex(slideSelected)
                initcommon();
                document.getElementById("lang-de").addEventListener("click", seteagerload);
                document.getElementById("lang-en").addEventListener("click", seteagerload);
                document.getElementById("text-wrap").style.visibility = "visible";
                console.log("INIT!")
            }

        </script>

        <script>

            // COVERSCRIPT

            var coversloaded = false;

            document.addEventListener("DOMContentLoaded", ()=>{})


            function initcovers() {
                if(coversloaded == true) {return}
                
                for (let i = 0; i < issues.length; i++) {
                    document.getElementById("slides").insertAdjacentHTML('beforeend', cover_template(i));
                    document.getElementById("text-wrap").insertAdjacentHTML('beforeend', title_template(i));
                }

                coversloaded = true;
            }


            function highlight_title(i) {

                let titles = document.querySelectorAll('.title');

                titles.forEach((title) => {title.style.fontWeight = "400"});
                titles.item(i).style.fontWeight = "700";
            }


            // EAGER LOAD ACCORDING TO LANGUAGE

            function seteagerload() {

                let covers = document.getElementById("slides").getElementsByTagName("img")
                
                for (let i = 0; i < covers.length; i++) {
                    if(covers[i].lang == localStorage.getItem("gefaengnishefte_language")) {
                        covers[i].loading = "eager"
                    }
                }
            }


            // PREVENT TOUCHING RESPONSE

            function init_prevent_touch_response() {
                let titles = document.getElementsByClassName("title")

                for (let i = 0; i < titles.length; i++) {
                    titles[i].addEventListener("pointerdown", (event) => {
                        if (event.pointerType === "touch" || event.pointerType === "pen") {
                            event.currentTarget.addEventListener("click", prevent_link_events)
                        }
                    })

                    titles[i].addEventListener("mouseenter", ()=>{titles[i].style.color = ""})
                }
            }

            function prevent_link_events(event) {
                event.preventDefault()
                event.currentTarget.style.color = "white"
                event.currentTarget.removeEventListener("click", prevent_link_events)
            }

        </script>

        <style>

            #content {
                display: grid !important;
                grid-template-columns: 1fr auto 1fr !important;
                grid-template-rows: 20px 1fr auto 1fr 1fr 1fr 20px  !important;
                grid-template-areas: 
                    ". . ."
                    ". . ."
                    ". issue-wrap ."
                    ". . ."
                    ". . ."
                    ". . ."
                    ". . ."  !important;
                place-items: center;
                overflow-y: hidden;
                height: calc(var(--vh, 1vh) * 100 - 98px) !important;;
            }

            #controls {
                display:none !important;
            }


            /* WRAPS */

            #issue-wrap {
                grid-area: issue-wrap;
				display: flex;
				justify-content: center;
				align-items: flex-start;
                gap: 80px;
            }

            #text-wrap {
                min-width:350px;
                max-width:350px;
                visibility: hidden;
            }

            #slides > div {
                text-align: center;
                display: none;
                margin-bottom: 0 !important;
            }
            
            #text-wrap > * {
                margin-top: 15px;
                margin-bottom: 15px;
            }

            /* COVERS */

            .cover-image {
                cursor: pointer;
                transition: 0.7s;
                box-shadow: 10px 10px 10px 0px rgba(0,0,0,0.35);
                max-width: 100%;
                max-height: 55vh;
            }

            .cover-image:hover {
                transform: scale(1.02);
            }

            .cover {
                min-width:300px;
                max-width:400px;
                -webkit-tap-highlight-color: transparent;
                -webkit-touch-callout: none;
                -webkit-user-select: none;
                -khtml-user-select: none;
                -moz-user-select: none;
                -ms-user-select: none;
                user-select: none;
            }

            .slide-cover {
                width: fit-content;
            }

            .title {
                display:flex;
                justify-content: space-between;
                white-space:nowrap;
                flex-wrap: wrap;
                cursor: pointer;
                -webkit-tap-highlight-color: transparent;
            }

            /* SLIDES */

            #slideIndex-wrap {
                width:100% !important;
                display: flex;
                justify-content: center;
            }

            #slideIndex {
                line-height: 1 !important;
                max-width: 440px !important;
                width:100% !important;
            }

            .title-inner, .slideIndexSpaced {
				display:flex;
				align-items: flex-start;
                gap:0px 30px;
            }

            .title-inner {
				justify-content: center;
                flex-wrap: wrap;
                text-align: center;
            }

            .slideIndexSpaced {
				justify-content: space-between;
				width:100%;
                text-align: right;
			}

            .slideIndexSpacedIssue {
                white-space: nowrap;
            }

            #slideCurrent {
                font-size: 15pt !important;
                width:160px !important;
                padding: 5px 15px 5px 15px !important;
                line-height: 1;
            }

            .controlLabelLarge {
                display: none!important;
            }

            .controlLabelSmall {
                display: inline!important;
            }

            #letztes, #nächstes {
                padding:0px!important;
                font-size: 35pt!important;
                width: 45px !important;
            }


            /*/////////////////////// REACTIVE ///////////////////////*/

            @media screen and (max-width: 1050px) {

                #issue-wrap {
                    gap: 40px;
                }
            }

            @media screen and (width < 800px), screen and (max-width: 800px) {
                #controls {
                    display:block !important;
                }

                #text-wrap {
                    display:none;
                }

                #cover-wrap {
                    width: unset;
                }

                .cover, #cover-wrap {
                    max-height: 60vh;
                    min-width: unset;
                }

                #content {
                    height: calc(var(--vh, 1vh) * 100 - 270px) !important;
                }
            }


            /* SMALL SCREEN ADJUSTMENTS */

            #slideCurrentTitle, #slideIndex {font-size: 15pt !important;}
            
            @media screen and (max-width: 500px) {
                #slideCurrentTitle, #slideIndex {font-size: 14pt !important;}
            }

            @media screen and (max-width: 450px) {
                #slideCurrentTitle, #slideIndex {font-size: 13pt !important;}
            }

            @media screen and (max-width: 430px) {
                #slideCurrentTitle, #slideIndex {font-size: 12pt !important;}
            }

            .spacedissuebreaks {
                display: none;
            }

            @media screen and (max-width: 400px) {
                .spacedissuebreaks {
                    display:inline;
                }
                .slideIndexSpaced {
                    justify-content: space-around;
                }
            }

            .overridetitletextSmall {display: none;}

            @media screen and (max-width: 350px) {

                .overridetitletextSmall {display: inline;}
                .overridetitletextLarge {display: none;}
                
                #slideCurrent {
                    padding:0px!important;
                    font-size: 22pt!important;
                    width: 45px !important;
                }

                .title-inner {
                    flex-direction: column;
                }
                
                .title-inner * {
                    width: 100%;
                }
            }


            /* LINKED TO CONTROL RESIZING */

            @media screen and (width < 800px) and (max-height: 800px), screen and (max-width: 800px) and (max-height: 800px) {
                #content {
                    height: calc(var(--vh, 1vh) * 100 - 240px) !important;
                }
            }

            @media screen and (width < 800px) and (max-height: 550px), screen and (max-width: 800px) and (max-height: 550px) {
                #content {
                    height: calc(var(--vh, 1vh) * 100 - 220px) !important;
                }
            }

            @media screen and (max-height: 550px) {
                .cover-image, #laden {
                    height: 45vh;
                }

                #content {
                    grid-template-columns: 1fr auto 1fr !important;
                    grid-template-rows: auto  !important;
                    grid-template-areas: 
                        ". issue-wrap ."  !important;
                }
            }


        </style>
    </head>

    <body>
        <div id="header"></div>

        <div id="content">
            <div id="issue-wrap">
                <div id="cover-wrap">
                    <div id="slides"></div>
                </div>
                <div id="text-wrap">

                </div>
            </div>
            
        </div>
        
        <div id="controls"></div>
        <div id="databanner"></div>
    </body>
</html>