<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>DEABONNIEREN</title>
        <meta name="viewport" content="width=device-width, height=device-height, user-scalable=no">
        <link rel="icon" type="image/x-icon" href="images/internal/faviconred.ico">
        <link rel="stylesheet" href="styles/fonts.css">
        <link rel="stylesheet" href="styles/general.css">
        <link rel="stylesheet" href="styles/red.css">
        <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
        <script>

            // LOADING

            var headerloaded, footerloaded, controlsloaded, databannerloaded = false;
            
            $(function(){
                $("#header").load("components/header.html", function() {headerloaded = true; init()});
                $("#databanner").load("components/databanner.html", function() {databannerloaded = true; init()});
            });

            function init() {
                if(headerloaded && databannerloaded){
                    initcookies();
                    initlanguage();
                }
            }
        
        </script>

		<script>
			// DEABONNIEREN

            document.addEventListener("DOMContentLoaded", () => {
                document.getElementById("deabonnieren").addEventListener('submit', function(event){

                    event.preventDefault()

                    $.ajax({
                        method: 'POST',
                        url: 'https://formsubmit.co/ajax/6d2bd15bcc3410a47e44b78943d390d0',
                        dataType: 'json',
                        accepts: 'application/json',
                        data: $(event.target).serialize()
                        ,
                        success: (data) => console.log(data),
                        error: (err) => alert(err)
                    });

                    document.getElementById("deabonnierenbutton").innerHTML = '<span lang="de">Deabonniert.</span><span lang="en">Unsubscribed.</span>';
                    document.getElementById("deabonnierenbutton").disabled = true;
                })

                document.getElementById("deabonnieren").addEventListener('input', function(event){
                    document.getElementById("deabonnierenbutton").innerHTML = '<span lang="de">Deabonnieren</span><span lang="en">Unsubscribe</span>';
                    document.getElementById("deabonnierenbutton").disabled = false;
                });
            });

		</script>

        <style>

            #deabonnieren-outer {
                padding:20px;
            }

            #deabonnieren-inner {
                margin-top:20vh;
                margin-left:auto;
                margin-right:auto;
                width:500px;
            }

        </style>
    </head>

    <body>

        <div id="header"></div>

        <div id="content">
            <div id="deabonnieren-outer">
                <div id="deabonnieren-inner">
                    <form id="deabonnieren" class="abo">
                        <button type="submit" id="deabonnierenbutton"><span lang="de">Deabonnieren</span><span lang="en">Unsubscribe</span></button>
                        <span><input type="email" name="Email" placeholder="Email" required></span>
                        <input type="hidden" name="_subject" value="DÃ©sabonnement">
                        <input type="hidden" name="_captcha" value="true">
                    </form>
                </div>
            </div>
        </div>

        <div id="databanner"></div>
    </body>
</html>
